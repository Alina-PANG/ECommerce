<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>View All Products</title>
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/index.css">
  </head>
  <body>
    <div class="body">
      <div class="header"></div>
      <div class="content">
        <div class="left"></div>
        <div class="center">
          <h3>Product Catalogue</h3>
          <div class="search-menu">
            <input type="text" id="search-bar" onkeyup="search_product()" placeholder="Search for products.." title="Type in a product name">
            <select class="form-control" id="select-tag">
                <option value="category">Category</option>
                <option value="tag">Tags</option>
            </select>
          </div>
          <table id="product-table">
            <tr>
              <th>Product ID</th>
              <th>SKU Code</th>
              <th>Name</th>
              <th>Description</th>
              <th>Rating</th>
              <th>Quantity on Hand</th>
              <th>Reorder Quantity</th>
              <th>Unit Price</th>
              <th>Category</th>
            </tr>
          </table>
        </div>
        <div class="right"></div>
      </div>
      <div class="footer"></div>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="../js/products-data-generator.js" charset="utf-8"></script>
  .<script type="text/javascript">
  function search_product() {
    var select_tag = $('#select-tag').find(":selected").text();
    var input, filter, flag, products_table,innerHTML, i;
    input = document.getElementById("search-bar");
    filter = input.value.toUpperCase().split(",");
    products_table = document.getElementById("product-table").childNodes;
    for (i = 2; i < products_table.length; i++) {
      flag = false;
      if(select_tag.toUpperCase() == "CATEGORY"){
        innerHTML = products_table[i].childNodes[8].innerHTML;
      }else if (select_tag.toUpperCase() == "TAG") {
        //pass
        console.log("not implemented yet");
      }

      for(var j = 0; j < filter.length; j ++){
        if (innerHTML.toUpperCase().indexOf(filter[j]) > -1){
          flag = true;
          break;
        }
      }

      if (flag) {
        products_table[i].style.display = "";
      } else {
        products_table[i].style.display = "none";
      }
    }
  }
  </script>
  <script src="../partial/template.js"></script>
</html>
